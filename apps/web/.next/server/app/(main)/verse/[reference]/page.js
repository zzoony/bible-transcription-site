(()=>{var e={};e.id=741,e.ids=[741],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},2968:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),a(8594),a(7093),a(3921);var r=a(3282),n=a(5736),s=a(3906),i=a.n(s),l=a(6880),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["(main)",{children:["verse",{children:["[reference]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8594)),"/Users/peter/Dev/bible-transcription-site/apps/web/app/(main)/verse/[reference]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,7093)),"/Users/peter/Dev/bible-transcription-site/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,3921)),"/Users/peter/Dev/bible-transcription-site/apps/web/app/not-found.tsx"]}],c=["/Users/peter/Dev/bible-transcription-site/apps/web/app/(main)/verse/[reference]/page.tsx"],u="/(main)/verse/[reference]/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(main)/verse/[reference]/page",pathname:"/verse/[reference]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7153:(e,t,a)=>{Promise.resolve().then(a.bind(a,2835))},2835:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ek});var r=a(3227),n=a(3677),s=a(1043),i=a(1009);function l({analysis:e,className:t}){return(0,r.jsxs)("div",{className:t,"data-testid":"analysis-display",children:[e.sentence_structure&&e.sentence_structure.length>0&&(0,r.jsxs)(i.Zb,{className:"mb-6","data-testid":"sentence-structure",children:[r.jsx(i.Ol,{children:r.jsx(i.ll,{children:"문장 구조 분석"})}),r.jsx(i.aY,{children:r.jsx("div",{className:"space-y-6",children:e.sentence_structure.map((e,t)=>r.jsx("div",{className:t>0?"pt-6 border-t":"",children:(0,r.jsxs)("div",{className:"space-y-4",children:[e.original_text&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"원문"}),r.jsx("p",{className:"leading-relaxed text-foreground italic",children:e.original_text})]}),e.korean_translation&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"직역"}),r.jsx("p",{className:"leading-relaxed text-foreground",children:e.korean_translation})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"의미적 분류"}),r.jsx("p",{className:"leading-relaxed text-foreground",children:e.semantic_classification})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"문법적 설명"}),r.jsx("p",{className:"leading-relaxed text-foreground",children:e.grammatical_explanation})]})]})},e.id||t))})})]}),e.vocabulary&&e.vocabulary.length>0&&(0,r.jsxs)(i.Zb,{className:"mb-6","data-testid":"vocabulary",children:[r.jsx(i.Ol,{children:r.jsx(i.ll,{children:"주요 단어들"})}),r.jsx(i.aY,{children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",role:"table",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b",children:[r.jsx("th",{className:"pb-3 text-left font-semibold",children:"Word"}),r.jsx("th",{className:"pb-3 text-left font-semibold",children:"IPA"}),r.jsx("th",{className:"pb-3 text-left font-semibold",children:"Korean"}),r.jsx("th",{className:"pb-3 text-left font-semibold",children:"Meaning"})]})}),r.jsx("tbody",{children:e.vocabulary.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b last:border-0",children:[r.jsx("td",{className:"py-3 font-medium",children:e.word}),r.jsx("td",{className:"py-3 text-muted-foreground",children:e.ipa_pronunciation}),r.jsx("td",{className:"py-3",children:e.korean_pronunciation}),r.jsx("td",{className:"py-3",children:e.definition_korean})]},e.id||t))})]})})})]}),e.contextual_explanation&&(0,r.jsxs)(i.Zb,{className:"mb-6","data-testid":"contextual-explanation",children:[r.jsx(i.Ol,{children:r.jsx(i.ll,{children:"문맥 설명"})}),r.jsx(i.aY,{children:r.jsx("p",{className:"leading-relaxed text-foreground whitespace-pre-wrap","data-testid":"explanation-text",children:e.contextual_explanation.integrated_explanation})})]}),e.korean_translation&&(0,r.jsxs)(i.Zb,{className:"mb-6","data-testid":"korean-translation",children:[r.jsx(i.Ol,{children:r.jsx(i.ll,{children:"한국어 번역"})}),r.jsx(i.aY,{children:r.jsx("p",{className:"text-lg leading-relaxed text-foreground","data-testid":"translation-text",children:e.korean_translation.natural_translation})})]}),e.special_explanation&&(0,r.jsxs)(i.Zb,{className:"mb-6","data-testid":"special-explanation",children:[r.jsx(i.Ol,{children:r.jsx(i.ll,{children:"특별 설명"})}),(0,r.jsxs)(i.aY,{children:[e.special_explanation.grammatical_notes&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("p",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"문법적 특이점"}),r.jsx("p",{className:"leading-relaxed text-foreground whitespace-pre-wrap",children:e.special_explanation.grammatical_notes})]}),e.special_explanation.interpretive_notes&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"해석적 특이점"}),r.jsx("p",{className:"leading-relaxed text-foreground whitespace-pre-wrap",children:e.special_explanation.interpretive_notes})]})]})]}),!e.sentence_structure?.length&&!e.vocabulary?.length&&!e.contextual_explanation&&!e.korean_translation&&!e.special_explanation&&r.jsx(i.Zb,{children:r.jsx(i.aY,{className:"py-12 text-center",children:r.jsx("p",{className:"text-muted-foreground",children:"Analysis data is not yet available for this verse."})})})]})}var o=a(7403),d=a(3074),c=a(5604),u=a(6016),p=a(4514),m=a(2764),x=a(3519),f=a(8332),h=a(9177),v=a(9797),g=e=>{let{present:t,children:a}=e,r=function(e){var t,a;let[r,s]=n.useState(),i=n.useRef(null),l=n.useRef(e),o=n.useRef("none"),[d,c]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},n.useReducer((e,t)=>a[e][t]??e,t));return n.useEffect(()=>{let e=b(i.current);o.current="mounted"===d?e:"none"},[d]),(0,v.b)(()=>{let t=i.current,a=l.current;if(a!==e){let r=o.current,n=b(t);e?c("MOUNT"):"none"===n||t?.display==="none"?c("UNMOUNT"):a&&r!==n?c("ANIMATION_OUT"):c("UNMOUNT"),l.current=e}},[e,c]),(0,v.b)(()=>{if(r){let e;let t=r.ownerDocument.defaultView??window,a=a=>{let n=b(i.current).includes(CSS.escape(a.animationName));if(a.target===r&&n&&(c("ANIMATION_END"),!l.current)){let a=r.style.animationFillMode;r.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=a)})}},n=e=>{e.target===r&&(o.current=b(i.current))};return r.addEventListener("animationstart",n),r.addEventListener("animationcancel",a),r.addEventListener("animationend",a),()=>{t.clearTimeout(e),r.removeEventListener("animationstart",n),r.removeEventListener("animationcancel",a),r.removeEventListener("animationend",a)}}c("ANIMATION_END")},[r,c]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:n.useCallback(e=>{i.current=e?getComputedStyle(e):null,s(e)},[])}}(t),s="function"==typeof a?a({present:r.isPresent}):n.Children.only(a),i=(0,c.e)(r.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(a=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(s));return"function"==typeof a||r.isPresent?n.cloneElement(s,{ref:i}):null};function b(e){return e?.animationName||"none"}g.displayName="Presence";var j=a(5579),N=a(745),y=a(6633),_=a(7525),w=a(2007),k="Dialog",[C,R]=(0,u.b)(k),[E,P]=C(k),I=e=>{let{__scopeDialog:t,children:a,open:s,defaultOpen:i,onOpenChange:l,modal:o=!0}=e,d=n.useRef(null),c=n.useRef(null),[u,x]=(0,m.T)({prop:s,defaultProp:i??!1,onChange:l,caller:k});return(0,r.jsx)(E,{scope:t,triggerRef:d,contentRef:c,contentId:(0,p.M)(),titleId:(0,p.M)(),descriptionId:(0,p.M)(),open:u,onOpenChange:x,onOpenToggle:n.useCallback(()=>x(e=>!e),[x]),modal:o,children:a})};I.displayName=k;var O="DialogTrigger";n.forwardRef((e,t)=>{let{__scopeDialog:a,...n}=e,s=P(O,a),i=(0,c.e)(t,s.triggerRef);return(0,r.jsx)(j.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":K(s.open),...n,ref:i,onClick:(0,d.Mj)(e.onClick,s.onOpenToggle)})}).displayName=O;var D="DialogPortal",[M,S]=C(D,{forceMount:void 0}),U=e=>{let{__scopeDialog:t,forceMount:a,children:s,container:i}=e,l=P(D,t);return(0,r.jsx)(M,{scope:t,forceMount:a,children:n.Children.map(s,e=>(0,r.jsx)(g,{present:a||l.open,children:(0,r.jsx)(h.h,{asChild:!0,container:i,children:e})}))})};U.displayName=D;var $="DialogOverlay",A=n.forwardRef((e,t)=>{let a=S($,e.__scopeDialog),{forceMount:n=a.forceMount,...s}=e,i=P($,e.__scopeDialog);return i.modal?(0,r.jsx)(g,{present:n||i.open,children:(0,r.jsx)(L,{...s,ref:t})}):null});A.displayName=$;var T=(0,w.Z8)("DialogOverlay.RemoveScroll"),L=n.forwardRef((e,t)=>{let{__scopeDialog:a,...n}=e,s=P($,a);return(0,r.jsx)(y.Z,{as:T,allowPinchZoom:!0,shards:[s.contentRef],children:(0,r.jsx)(j.WV.div,{"data-state":K(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),z="DialogContent",Z=n.forwardRef((e,t)=>{let a=S(z,e.__scopeDialog),{forceMount:n=a.forceMount,...s}=e,i=P(z,e.__scopeDialog);return(0,r.jsx)(g,{present:n||i.open,children:i.modal?(0,r.jsx)(q,{...s,ref:t}):(0,r.jsx)(F,{...s,ref:t})})});Z.displayName=z;var q=n.forwardRef((e,t)=>{let a=P(z,e.__scopeDialog),s=n.useRef(null),i=(0,c.e)(t,a.contentRef,s);return n.useEffect(()=>{let e=s.current;if(e)return(0,_.Ry)(e)},[]),(0,r.jsx)(B,{...e,ref:i,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,d.Mj)(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:(0,d.Mj)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,d.Mj)(e.onFocusOutside,e=>e.preventDefault())})}),F=n.forwardRef((e,t)=>{let a=P(z,e.__scopeDialog),s=n.useRef(!1),i=n.useRef(!1);return(0,r.jsx)(B,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||a.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"!==t.detail.originalEvent.type||(i.current=!0));let r=t.target;a.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),B=n.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,...o}=e,d=P(z,a),u=n.useRef(null),p=(0,c.e)(t,u);return(0,N.EW)(),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.M,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:l,children:(0,r.jsx)(x.XB,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":K(d.open),...o,ref:p,onDismiss:()=>d.onOpenChange(!1)})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(et,{titleId:d.titleId}),(0,r.jsx)(ea,{contentRef:u,descriptionId:d.descriptionId})]})]})}),W="DialogTitle",V=n.forwardRef((e,t)=>{let{__scopeDialog:a,...n}=e,s=P(W,a);return(0,r.jsx)(j.WV.h2,{id:s.titleId,...n,ref:t})});V.displayName=W;var Y="DialogDescription",X=n.forwardRef((e,t)=>{let{__scopeDialog:a,...n}=e,s=P(Y,a);return(0,r.jsx)(j.WV.p,{id:s.descriptionId,...n,ref:t})});X.displayName=Y;var G="DialogClose",H=n.forwardRef((e,t)=>{let{__scopeDialog:a,...n}=e,s=P(G,a);return(0,r.jsx)(j.WV.button,{type:"button",...n,ref:t,onClick:(0,d.Mj)(e.onClick,()=>s.onOpenChange(!1))})});function K(e){return e?"open":"closed"}H.displayName=G;var J="DialogTitleWarning",[Q,ee]=(0,u.k)(J,{contentName:z,titleName:W,docsSlug:"dialog"}),et=({titleId:e})=>{let t=ee(J),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return n.useEffect(()=>{e&&!document.getElementById(e)&&console.error(a)},[a,e]),null},ea=({contentRef:e,descriptionId:t})=>{let a=ee("DialogDescriptionWarning"),r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return n.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&!document.getElementById(t)&&console.warn(r)},[r,e,t]),null},er=a(7587),en=a(8969);let es=n.forwardRef(({className:e,...t},a)=>r.jsx(A,{ref:a,className:(0,en.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));es.displayName=A.displayName;let ei=n.forwardRef(({className:e,children:t,...a},n)=>(0,r.jsxs)(U,{children:[r.jsx(es,{}),(0,r.jsxs)(Z,{ref:n,className:(0,en.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,r.jsxs)(H,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(er.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ei.displayName=Z.displayName;let el=({className:e,...t})=>r.jsx("div",{className:(0,en.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});el.displayName="DialogHeader";let eo=n.forwardRef(({className:e,...t},a)=>r.jsx(V,{ref:a,className:(0,en.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));eo.displayName=V.displayName;let ed=n.forwardRef(({className:e,...t},a)=>r.jsx(X,{ref:a,className:(0,en.cn)("text-sm text-muted-foreground",e),...t}));ed.displayName=X.displayName;var ec=a(6942),eu=a(4583);let ep=(0,eu.Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),em=(0,eu.Z)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),ex=(0,eu.Z)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),ef=(0,eu.Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);function eh({verse:e,open:t,onOpenChange:a}){let[s,i]=(0,n.useState)(!1),l=`${e.book} ${e.chapter}:${e.verse} - ${e.text}`,d=async()=>{try{await navigator.clipboard.writeText(""),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};return r.jsx(I,{open:t,onOpenChange:a,children:(0,r.jsxs)(ei,{"data-testid":"share-modal",children:[(0,r.jsxs)(el,{children:[r.jsx(eo,{children:"Share Verse"}),r.jsx(ed,{children:"Share this verse with others"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:"",readOnly:!0,className:"flex-1 rounded-md border bg-background px-3 py-2 text-sm"}),r.jsx(o.z,{variant:"outline",size:"sm",onClick:d,"data-testid":"copy-link-button",children:s?r.jsx(ec.Z,{className:"h-4 w-4"}):r.jsx(ep,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,r.jsxs)(o.z,{variant:"outline",onClick:()=>{let e=`https://twitter.com/intent/tweet?text=${encodeURIComponent(l)}&url=${encodeURIComponent("")}`;window.open(e,"_blank","width=550,height=420")},className:"w-full","data-testid":"twitter-share",children:[r.jsx(em,{className:"h-4 w-4 mr-2"}),"Twitter"]}),(0,r.jsxs)(o.z,{variant:"outline",onClick:()=>{let e=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent("")}`;window.open(e,"_blank","width=550,height=420")},className:"w-full","data-testid":"facebook-share",children:[r.jsx(ex,{className:"h-4 w-4 mr-2"}),"Facebook"]}),(0,r.jsxs)(o.z,{variant:"outline",onClick:()=>{let t=`${e.book} ${e.chapter}:${e.verse}`,a=`${l}

`;window.location.href=`mailto:?subject=${encodeURIComponent(t)}&body=${encodeURIComponent(a)}`},className:"w-full","data-testid":"email-share",children:[r.jsx(ef,{className:"h-4 w-4 mr-2"}),"Email"]})]})]})]})})}var ev=a(8746),eg=a(5435),eb=a(5749);function ej({currentReference:e,prev:t,next:a,hasPrev:n,hasNext:s,isLoading:i=!1,onNavigate:l,className:d}){return(0,r.jsxs)("div",{className:(0,en.cn)("flex items-center justify-between gap-4",d),"data-testid":"navigation-controls",children:[(0,r.jsxs)(o.z,{variant:"outline",size:"default",onClick:()=>{t&&n&&!i&&l(t)},disabled:!n||i,"aria-label":t?`이전 구절로 이동: ${t}`:"이전 구절 없음",className:"min-w-[100px] touch-manipulation","data-testid":"nav-prev-button",children:[i?r.jsx(ev.Z,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx(eg.Z,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"이전"}),r.jsx("span",{className:"sm:hidden",children:"이전"})]}),r.jsx("div",{className:"flex-1 text-center text-sm text-muted-foreground hidden md:block","aria-live":"polite","data-testid":"nav-current-reference",children:e}),(0,r.jsxs)(o.z,{variant:"outline",size:"default",onClick:()=>{a&&s&&!i&&l(a)},disabled:!s||i,"aria-label":a?`다음 구절로 이동: ${a}`:"다음 구절 없음",className:"min-w-[100px] touch-manipulation","data-testid":"nav-next-button",children:[r.jsx("span",{className:"hidden sm:inline",children:"다음"}),r.jsx("span",{className:"sm:hidden",children:"다음"}),i?r.jsx(ev.Z,{className:"h-4 w-4 ml-2 animate-spin"}):r.jsx(eb.Z,{className:"h-4 w-4 ml-2"})]})]})}let eN=(0,eu.Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ey=(0,eu.Z)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function e_({analysis:e,onBack:t,onCopy:a,onShare:s,onNavigate:i,navigationState:d,isLoading:c=!1,className:u}){let[p,m]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1),h=async()=>{try{await navigator.clipboard.writeText(`${e.verse.book} ${e.verse.chapter}:${e.verse.verse}
${e.verse.text}`),m(!0),a?.(),setTimeout(()=>m(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};if(c)return r.jsx("div",{className:"flex items-center justify-center py-12","data-testid":"verse-loading",children:r.jsx("div",{className:"text-muted-foreground",children:"Loading verse analysis..."})});let v=`${e.verse.book} ${e.verse.chapter}:${e.verse.verse}`;return(0,r.jsxs)("div",{className:u,"data-testid":"verse-detail",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[t&&(0,r.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:t,"data-testid":"back-button",children:[r.jsx(eN,{className:"h-4 w-4 mr-2"}),"뒤로"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(o.z,{variant:"outline",size:"sm",onClick:h,"data-testid":"copy-button",children:[r.jsx(ep,{className:"h-4 w-4 mr-2"}),p?"복사됨!":"복사"]}),s&&(0,r.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>{f(!0),s?.()},"data-testid":"share-button",children:[r.jsx(ey,{className:"h-4 w-4 mr-2"}),"공유"]})]})]}),d&&i&&r.jsx("div",{className:"mb-6",children:r.jsx(ej,{currentReference:v,prev:d.prev,next:d.next,hasPrev:d.hasPrev,hasNext:d.hasNext,isLoading:d.isLoading,onNavigate:i})}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h1",{className:"mb-4 text-2xl font-bold text-primary","data-testid":"verse-reference",children:[e.verse.book," ",e.verse.chapter,":",e.verse.verse]}),r.jsx("p",{className:"text-lg leading-relaxed text-foreground","data-testid":"verse-text",children:e.verse.text})]}),r.jsx("div",{"data-testid":"analysis-container",children:r.jsx(l,{analysis:e})}),d&&i&&r.jsx("div",{className:"mt-8",children:r.jsx(ej,{currentReference:v,prev:d.prev,next:d.next,hasPrev:d.hasPrev,hasNext:d.hasNext,isLoading:d.isLoading,onNavigate:i})}),r.jsx(eh,{verse:e.verse,open:x,onOpenChange:f})]})}var ew=a(7517);function ek(){let e=(0,s.useRouter)();(0,s.useParams)().reference;let{data:t,isLoading:a,error:l,fetchVerse:o}=function(){let[e,t]=(0,n.useState)({reference:null,isLoading:!1,error:null,data:null}),a=(0,n.useCallback)(async e=>{t({reference:e,isLoading:!0,error:null,data:null});try{let a=(0,ew.S2)(),r=decodeURIComponent(e),n=(0,en.rt)(r);if(!n)throw Error("Invalid verse reference format");let{book:s,chapter:i,verse:l}=n,o=`${s} ${i}:${l}`,{data:d,error:c}=await a.from("verses").select(`
          id,
          reference,
          niv_text,
          verse_number,
          book_id,
          chapter_id,
          analysis_completed,
          created_at,
          updated_at,
          books!inner(name_english),
          chapters!inner(chapter_number)
        `).ilike("reference",o).single();if(c)throw c;if(!d)throw Error("Verse not found");let u=(0,en.rt)(d.reference),p={id:d.id,book_id:d.book_id,chapter_id:d.chapter_id,verse_number:d.verse_number,reference:d.reference,niv_text:d.niv_text,analysis_completed:d.analysis_completed,created_at:d.created_at,updated_at:d.updated_at,book:u?.book||d.books.name_english,chapter:u?.chapter||d.chapters.chapter_number,verse:u?.verse||d.verse_number,text:d.niv_text},[{data:m},{data:x},{data:f},{data:h},{data:v}]=await Promise.all([a.from("sentence_structures").select("*").eq("verse_id",d.id).order("sequence_order",{ascending:!0}),a.from("vocabulary").select("*").eq("verse_id",d.id).order("id",{ascending:!0}),a.from("contextual_explanations").select("*").eq("verse_id",d.id).single(),a.from("korean_translations").select("*").eq("verse_id",d.id).single(),a.from("special_explanations").select("*").eq("verse_id",d.id).single()]);t({reference:e,isLoading:!1,error:null,data:{verse:p,sentence_structure:m||[],vocabulary:x||[],contextual_explanation:f||null,korean_translation:h||null,special_explanation:v||null}})}catch(a){console.error("Fetch verse error:",a),t({reference:e,isLoading:!1,error:a instanceof Error?a.message:"Failed to fetch verse",data:null})}},[]),r=(0,n.useCallback)(()=>{t({reference:null,isLoading:!1,error:null,data:null})},[]);return{...e,fetchVerse:a,clear:r}}(),{prev:d,next:c,hasPrev:u,hasNext:p,isLoading:m}=function(e){let[t,a]=(0,n.useState)(null),[r,s]=(0,n.useState)(null),[i,l]=(0,n.useState)(!1),[o,d]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[p,m]=(0,n.useState)(null),x=(0,n.useCallback)(async(e,t)=>{let a=`/api/verse/navigation?reference=${encodeURIComponent(e)}&direction=${t}`,r=await fetch(a);if(!r.ok)throw Error((await r.json().catch(()=>({}))).error||`API 오류: ${r.status}`);return await r.json()},[]);return{prev:t,next:r,hasPrev:i,hasNext:o,isLoading:c,error:p,fetchNavigation:(0,n.useCallback)(async()=>{if(!e){a(null),s(null),l(!1),d(!1);return}u(!0),m(null);try{let[t,r]=await Promise.all([x(e,"prev"),x(e,"next")]);a(t.target),l(t.hasTarget),s(r.target),d(r.hasTarget)}catch(e){console.error("Navigation 조회 오류:",e),m(e instanceof Error?e.message:"탐색 정보를 불러올 수 없습니다"),a(null),s(null),l(!1),d(!1)}finally{u(!1)}},[e,x])}}(t?.verse.reference),x=()=>{e.back()},f=(0,n.useCallback)(t=>{let a=encodeURIComponent(t);e.push(`/verse/${a}`)},[e]);return l?r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsx(i.Zb,{className:"border-destructive",children:(0,r.jsxs)(i.aY,{className:"py-12 text-center",children:[r.jsx("p",{className:"text-lg text-destructive mb-4",children:"Error loading verse"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:l}),r.jsx("button",{onClick:x,className:"text-primary hover:underline",children:"Go back"})]})})}):a||!t?r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsx(e_,{analysis:{verse:{reference:"",verse_number:0,niv_text:"",book:"",chapter:0,verse:0,text:""},sentence_structure:[],vocabulary:[],contextual_explanation:null,korean_translation:null,special_explanation:null},isLoading:!0})}):r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsx(e_,{analysis:t,onBack:x,onShare:()=>{let e={title:t?`${t.verse.book} ${t.verse.chapter}:${t.verse.verse}`:"Bible Verse",text:t?.verse.text||"",url:window.location.href};navigator.share?navigator.share(e).catch(e=>{console.error("Error sharing:",e)}):(navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))},onNavigate:f,navigationState:{prev:d,next:c,hasPrev:u,hasNext:p,isLoading:m},isLoading:a})})}},1009:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>l,Zb:()=>i,aY:()=>d,ll:()=>o});var r=a(3227),n=a(3677),s=a(8969);let i=n.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let l=n.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=n.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle",n.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let d=n.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,s.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",n.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},7517:(e,t,a)=>{"use strict";a.d(t,{S2:()=>s});var r=a(747);let n=null;function s(){return n||(n=(0,r.eI)(function(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL;if(!e)throw Error("Missing env.NEXT_PUBLIC_SUPABASE_URL");return e}(),function(){let e=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e)throw Error("Missing env.NEXT_PUBLIC_SUPABASE_ANON_KEY");return e}(),{auth:{persistSession:!1},db:{schema:"public"},global:{headers:{"x-application-name":"bible-transcription-site"}}})),n}process.env.NEXT_PUBLIC_SUPABASE_URL&&s()},8746:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(4583).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8594:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(3189).createProxy)(String.raw`/Users/peter/Dev/bible-transcription-site/apps/web/app/(main)/verse/[reference]/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[193,105,460,904,235,495],()=>a(2968));module.exports=r})();