"use strict";(()=>{var e={};e.id=369,e.ids=[369],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},3915:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>d,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>c});var s={};t.r(s),t.d(s,{GET:()=>p});var n=t(3036),a=t(5736),o=t(5262),i=t(942),u=t(5655);async function p(e){try{let e=(0,u.lx)(),{data:r,error:t}=await e.from("verses").select("id, reference, verse_number").order("reference").returns();if(t)return console.error("DB 조회 오류:",t),i.NextResponse.json({error:"데이터베이스 조회 중 오류가 발생했습니다"},{status:500});if(!r||0===r.length)return i.NextResponse.json({error:"구절 데이터가 없습니다"},{status:404});let s=new Map;r.forEach(e=>{let r=function(e){let r=e.match(/^([A-Za-z\s\d]+)\s+(\d+):(\d+)$/);if(!r)return null;let[,t,s,n]=r;return{book:t.trim(),chapter:parseInt(s,10),verse:parseInt(n,10)}}(e.reference);if(!r){console.warn(`잘못된 reference 형식: ${e.reference}`);return}let{book:t,chapter:n,verse:a}=r;s.has(t)||s.set(t,{id:e.id,name:t,chapters:new Map});let o=s.get(t);o.chapters.has(n)||o.chapters.set(n,{verses:[]}),o.chapters.get(n).verses.push(a)});let n=Array.from(s.entries()).map(([e,r])=>{let t=Array.from(r.chapters.entries()).sort(([e],[r])=>e-r).map(([e,r])=>{let t=r.verses.sort((e,r)=>e-r);return{number:e,totalVerses:t.length,availableVerses:t}});return{id:r.id,name:e,nameKorean:({Philippians:"빌립보서",Galatians:"갈라디아서",Romans:"로마서",Ephesians:"에베소서",Colossians:"골로새서","1 Thessalonians":"데살로니가전서","2 Thessalonians":"데살로니가후서","1 Corinthians":"고린도전서","2 Corinthians":"고린도후서","1 Timothy":"디모데전서","2 Timothy":"디모데후서",Titus:"디도서",Philemon:"빌레몬서",Hebrews:"히브리서",James:"야고보서","1 Peter":"베드로전서","2 Peter":"베드로후서","1 John":"요한일서","2 John":"요한이서","3 John":"요한삼서",Jude:"유다서",Revelation:"요한계시록",Matthew:"마태복음",Mark:"마가복음",Luke:"누가복음",John:"요한복음",Acts:"사도행전"})[e]||e,chapters:t}}),a=["Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"];return n.sort((e,r)=>{let t=a.indexOf(e.name),s=a.indexOf(r.name);return -1!==t&&-1!==s?t-s:-1!==t?-1:-1!==s?1:e.name.localeCompare(r.name)}),i.NextResponse.json({books:n},{headers:{"Cache-Control":"public, max-age=3600, s-maxage=7200"}})}catch(e){return console.error("Bible Structure API 오류:",e),i.NextResponse.json({error:"서버 오류가 발생했습니다",...!1},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/navigation/structure/route",pathname:"/api/navigation/structure",filename:"route",bundlePath:"app/api/navigation/structure/route"},resolvedPagePath:"/Users/peter/Dev/bible-transcription-site/apps/web/app/api/navigation/structure/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:c,serverHooks:m}=l,d="/api/navigation/structure/route";function v(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:c})}},5655:(e,r,t)=>{t.d(r,{lx:()=>o});var s=t(1337);function n(){let e=process.env.NEXT_PUBLIC_SUPABASE_URL;if(!e)throw Error("Missing env.NEXT_PUBLIC_SUPABASE_URL");return e}let a=null;function o(){let e=process.env.SUPABASE_SERVICE_KEY;if(!e)throw Error("Missing env.SUPABASE_SERVICE_KEY");return(0,s.eI)(n(),e,{auth:{persistSession:!1,autoRefreshToken:!1},db:{schema:"public"}})}process.env.NEXT_PUBLIC_SUPABASE_URL&&(a||(a=(0,s.eI)(n(),function(){let e=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e)throw Error("Missing env.NEXT_PUBLIC_SUPABASE_ANON_KEY");return e}(),{auth:{persistSession:!1},db:{schema:"public"},global:{headers:{"x-application-name":"bible-transcription-site"}}})))}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[193,174],()=>t(3915));module.exports=s})();